Collecting v4l2-python3 (from picamera2)
  Using cached https://www.piwheels.org/simple/v4l2-python3/v4l2_python3-0.3.5-py3-none-any.whl (22 kB)
Collecting python-prctl (from picamera2)
  Using cached python-prctl-1.8.1.tar.gz (28 kB)
  Installing build dependencies ... done
  Getting requirements to build wheel ... error
  error: subprocess-exited-with-error
  
  Getting requirements to build wheel did not run successfully.
  exit code: 1
  
  [1 lines of output]
  You need to install libcap development headers to build this module
  [end of output]
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
error: subprocess-exited-with-error

Getting requirements to build wheel did not run successfully.
exit code: 1

See above for output.

note: This error originates from a subprocess, and is likely not a problem with pip.










from picamera2 import Picamera2
import cv2

# Инициализация камеры
picam2 = Picamera2()
picam2.preview_configuration.main.size = (640, 480)
picam2.preview_configuration.main.format = "RGB888"
picam2.configure("preview")
picam2.start()

while True:
    frame = picam2.capture_array()
    
    frame = cv2.cvtColor(frame, cv2.COLOR_RGB2BGR)  # Потому что Picamera2 отдаёт RGB
    cv2.imshow("Picamera2 stream", frame)

    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

picam2.stop()
cv2.destroyAllWindows()
